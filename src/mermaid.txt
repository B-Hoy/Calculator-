classDiagram
    direction LR
    class App {
        +StartingWindow()
    }
    class MainWindow {
        -currentNumber: string
        -operation: string
        -result: double
        -u: User
        -ops: Dictionary~char, AOperator~
        +Number_Click()
        +Operator_Click()
        +Purchase_Click()
        +Equals_Click()
        +UnlockOperator(Operators)
    }
    class CreateUser {
        -vars: CreateUserVars
        +SubmitPage()
    }
    class Shop {
        -rotator: BackgroundWorker
        -u: User
        +Shop(User)
    }
    class PickOperator {
        -mainWindow: MainWindow
        +SelectedOperator: Operators
        +PurchasePressed()
    }
    class Statistics {
        -currentUser: User
        +GenerateGraph()
    }
    class Database {
        -conn: SQLiteConnection
        -hook: SQLiteContext
        +Init()
        +AddUser()
    }
    class SQLiteContext {
        +Users: DbSet~User~
    }
    class User {
        +ID: int
        +Email: string
        +Fname: string
        +Lname: string
        +IsActiveUser: bool
        +UnlockedDigits: int
        +OperatorsUnlocked: Operators
        +Score: double
        +ChargeUserCard(cents, reason)
        +AddUnlock(double, string)
        +AddScore(double, string)
    }
    class AOperator {
        #myButton: Button
        +Evaluate(List~T~) T
        +Enable()
        +GetWeight(): double
    }
    class Add
    class Subtract
    class Multiply
    class Divide
    class Percent
    class Square
    class Root
    class Logarithm
    class Polynomial

    App --|> Application
    App ..> MainWindow : Creates
    App ..> CreateUser : Creates
    App ..> Database : Initialises
    App ..> User : Uses

    MainWindow --|> Window
    MainWindow ..> Shop : Creates
    MainWindow ..> Statistics : Creates
    MainWindow ..> User : Uses
    MainWindow ..> AOperator : Uses

    CreateUser --|> Window
    CreateUser ..> Database: Adds User
    CreateUser ..> User : Creates

    Shop --|> Window
    Shop ..> PickOperator : Creates
    Shop ..> User : Uses

    PickOperator --|> Window
    PickOperator ..> MainWindow : Modifies

    Statistics --|> Window
    Statistics ..> User : Uses

    Database ..> SQLiteContext : Uses
    Database ..> User : Creates and Manages

    SQLiteContext --|> DbContext
    SQLiteContext "1" -- "0..*" User : Has

    User ..> StripeAPI : Uses for Payments
    User --|> INotifyPropertyChanged

    AOperator <|-- Add
    AOperator <|-- Subtract
    AOperator <|-- Multiply
    AOperator <|-- Divide
    AOperator <|-- Percent
    AOperator <|-- Square
    AOperator <|-- Root
    AOperator <|-- Logarithm
    AOperator <|-- Polynomial